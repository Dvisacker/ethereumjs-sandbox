<html>
	<head>
		<script type="text/javascript" src="js/jquery-2.2.2.min.js"></script>
		<script type="text/javascript" src="js/semantic.min.js"></script>
		<link rel="stylesheet" type="text/css" href="css/semantic.min.css">
	</head>

	<body>
		<div class="ui container form">
					<hr class="ui hidden divider" />
					<h2 class="ui aligned header">Ethereumjs Sandbox</h2>
					<div>
						<p>This is a place to play around and not worry about real money or ether.</p>
					</div>
					<hr class="ui hidden divider"/>
					<h3 class="ui aligned header">Start an RPC Provider</h3>

                    <ul>
                        <li>
                            <p>Test RPC simulates a node and exposes a JSON-RPC interface.</p>
				    <form id="testRPCForm">
                        <button type="submit" id="startTestRPC" class="ui button blue">Start Test RPC</button>
                    </form>
                        </li>
                        <li>
                            <p>To poke around further, you may want to run a local node. This will currently run a local geth node with a custom genesis block. Later this will support Modern.</p>
                            <form action="/local_node" id="localNodeForm">
                                <button type="submit" id="startLocalNode" class="ui button blue">Start Local Node</button>
                            </form>
                        </li>                        
                    </ul>
            
					<div id="startNodeResponse" class="ui message">
					  <div class="header">
							Local Geth Node
					  </div>
					  <p id="startNodeResponse_body"></p>
				 	</div>
					<div id="startTestRPCResponse" class="ui message">
					  <div class="header">
							Test RPC
					  </div>
					  <p id="startTestRPCResponse_body"></p>
				 	</div>
        
            
					<hr class="ui hidden divider" />
					<h3 class="ui aligned header">Deploy a contract</h3>
            
                        <p> Contracts are located in the contracts folder of the project directory </p>
						<p>You can refer to them by name below.</p>	
			
                    <input type="text" id="deployContractName" class="ui input" style="width: 25%" placeholder="contract_name"/>
                    <p></p> 
                    
                    <form action="/deploy" id="deployForm">
                        <button type="submit" id="deployButton" class="ui button blue">Deploy</button>
                    </form>
            
					<div id="deployResponse" class="ui message">
					  <div class="header">
					  		Deployment Status
					  </div>
					  <p id="_deployResponse_body"></p>
					</div>
					<hr class="ui hidden divider" />
		</div>
		<script type="text/javascript">
			// hide all messages
			$("#startNodeResponse").hide();
			$("#startTestRPCResponse").hide();
			$("#deployResponse").hide();
            
            $("testRPCForm").submit((event) => {
                event.preventDefault(); 
                
                posting = $.post({url: '/testrpc', type: 'post'});               
                
                
                posting.done( (data) => {
                    var content = $( data ).find( "#content" );
                    $( "#startTestRPCResponse_body").empty().append(content);
                    $("#startTestRPCResponse_body").show();
                });
            });
		</script>
	</body>
</html>
